/* eslint-disable no-console */

function debug(debugText, error) {
    if (process.env.DEBUG) {
        console.log(getMessage(debugText, error));
    }
}

function getMessage(errorText, error) {
    let message = errorText ? errorText : '';
    if (!error) {
        return message;
    }
    message += '\n' + (
           error.response?.data?.message        // response body == error
        || error.response?.data?.error?.message // response body == { error }
        || error.message                        // no response attached
    );
    if (process.env.DEBUG && error.stack) {
        message += '\n' + error.stack;
    }
    return message;
}

module.exports = {
    debug,
    getMessage
};
