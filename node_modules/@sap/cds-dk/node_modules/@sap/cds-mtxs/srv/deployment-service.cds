// using from '@sap/cds-mtxs/srv/model-provider'; //> IMPORTANT: don't add this as it will cause services loaded twice

@protocol:'rest'
@(requires: ['cds.Subscriber', 'internal-user'])
@(path:'/-/cds/deployment')
service cds.xt.DeploymentService @(impl:'@sap/cds-mtxs/srv/deployment-service.js') {

    /**
     * Subscribe tenant
     * @param tenant Tenant to subscribe
     * @param options Additional subscription options
     */
    @open
    action subscribe(@mandatory tenant: String, metadata: {}, options:{});

    /**
     * Unsubscribe tenant
     * @param tenant Tenant to unsubscribe
     */
    @open
    action unsubscribe(@mandatory tenant: String, options: {});

    /**
     * Extend tenant
     * @param tenant Tenant to extend
     */
    @open
    action extend(@mandatory tenant: String);

    @open
    action upgrade(@mandatory tenant: String, options:{});

    @open
    action deploy(@mandatory tenant: String, options:{});

    // Do we need this for job orchstration via CLI use?
    //action updateAll(options:{});

    type Tenants {

    }

    function needsT0Redeployment() returns Boolean;

    function getTables(@mandatory tenant: String) returns Array of String;
}
